#!/bin/bash

########################################################################
# Own Stuff here
########################################################################

export PATH="$PATH:/opt/vertica/bin"
export LC_ALL="en_US.UTF-8"

# Less Colors for Man Pages
export LESS_TERMCAP_mb=$'\E[01;31m'       # begin blinking
export LESS_TERMCAP_md=$'\E[01;38;5;74m'  # begin bold
export LESS_TERMCAP_me=$'\E[0m'           # end mode
export LESS_TERMCAP_se=$'\E[0m'           # end standout-mode
export LESS_TERMCAP_so=$'\E[38;5;246m'    # begin standout-mode - info box
export LESS_TERMCAP_ue=$'\E[0m'           # end underline
export LESS_TERMCAP_us=$'\E[04;38;5;146m' # begin underline

function strToLower () {
  echo ${1,,}
}

function strToUpper () {
  echo ${1^^}
}

# Set the title of a terminal with a special escape sequence
function setTerminalTitel () {
  echo -ne "\033]0;"$@"\007"
}

# enable aws cli autocomplete
complete -C aws_completer aws

# Benachrichtigungen bei langen Prozessen
if [ -x /usr/bin/notify-send ]; then
  alias alert='notify-send -i gnome-terminal "[$?] $(history|tail -n1|sed -e '\''s/^\s*[0-9]\+\s*//;s/;\s*alert$//'\'')"'
fi

alias grep='grep --color="always"'

########################################################################

### Configuration
# Some of my configurations stuff here...
EDITOR="vim"
PAGER="less"

export EDITOR="$EDITOR"

# For longer commands this is useful sometimes
miniprompt() {
        PS1='$ '
}

function prompt_func() {
  PROMPT="${Purple}[${BBlack}\$?${Color_Off}${Purple}] ${Purple}\A${Color_Off} ${BGreen}\u${BBlue}::${BRed}\h${Blue} { ${BBlue}\w${Blue} } ${BGreen}->${Color_Off} "
  PS1="${PROMPT}$ "
}

PROMPT_COMMAND=prompt_func

# Git prompt

GIT_PROMPT_ONLY_IN_REPO=1
GIT_PROMPT_THEME=Single_line_Ubuntu

[ -s "$HOME/.bash-git-prompt/gitprompt.sh" ] && source "$HOME/.bash-git-prompt/gitprompt.sh"

# Git prompt ende

### Aliases
# List directory contents
alias sl=ls
#alias ls='ls -G' # Compact view, show colors
#alias la='ls -AF' # Compact view, show hidden
#alias ll='ls -al'
alias lh='ls -lht'
alias l='ls -lah'
alias k='clear'
alias q="exit"
alias h='history'

alias editor="$EDITOR"
alias pager="$PAGER"

alias ..='cd ..' # Go up one directory
alias ...='cd ../..' # Go up two directories
alias -- -="cd -" # Go back


alias dockOn='xrandr --output HDMI1 --mode 1920x1080 --primary && xrandr --output DP2 --mode 1920x1080 --right-of HDMI1; xrandr --output eDP1 --off;'
alias dockOff='xrandr --output eDP1 --mode 1600x900 --primary && xrandr --output HDMI1 --off && xrandr --output DP2 --off'
alias benqUpright='xrandr --output DP2 --mode 1280x1024 --rotate left --noprimary --right-of eDP1'
alias benq='xrandr --output DP2 --mode 1280x1024 --noprimary --right-of eDP1'
alias smaatoscreen='xrandr --output eDP1 --fb 1600x900 --mode 1600x900 --scale 1x1 --output HDMI1 --same-as eDP1 --mode 1920x1080 --scale-from 1600x900'

# Tree
alias tree-bash="find . -print | sed -e 's;[^/]*/;|____;g;s;____|; |;g'"

# Directory
alias md='mkdir -p'
alias rd=rmdir
alias d='dirs -v'

# lazyness ftw
alias reload='source ~/.bashrc'
alias ducks='du -cks * | sort -rn | head -11 '
alias xmod='chmod +x'
alias timestamp='date "+%Y%m%dT%H%M%S"'
alias whereami='echo "$( hostname --fqdn ) ($(hostname -i)):$( pwd )"' # Complement to whoami command.

### History - made right.
# history length
HISTSIZE=1000000
HISTFILESIZE=1000000

# don't put duplicate lines in the history. See bash(1) for more options
# ... or force ignoredups and ignorespace
HISTCONTROL=ignoredups:ignorespace

# setting up timestamp for history
HISTTIMEFORMAT="%F %T "

# Reverse History
function rh {
  history | awk '{a[$4]++}END{for(i in a){print a[i] " " i}}' | sort -rn | head
}

# append to the history file, don't overwrite it
shopt -s histappend

# add this configuration to ~/.bashrc
export HH_CONFIG=hicolor         # get more colors
export PROMPT_COMMAND="history -a; history -n; ${PROMPT_COMMAND}"   # mem/file sync
# if this is interactive shell, then bind hh to Ctrl-r
if [[ $- =~ .*i.* ]]; then bind '"\C-r": "\C-a hh \C-j"'; fi
